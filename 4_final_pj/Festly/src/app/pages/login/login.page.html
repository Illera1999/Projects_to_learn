<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Iniciar sesión</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Iniciar sesión</ion-title>
    </ion-toolbar>
  </ion-header>

  <section class="auth-wrapper">
    <form
      #loginForm="ngForm"
      (ngSubmit)="onSubmit(loginForm)"
      class="auth-form"
    >
      <ion-list lines="none" class="auth-card">
        <ion-item>
          <ion-label position="stacked">Email</ion-label>
          <ion-input
            type="email"
            name="email"
            required
            autocomplete="email"
            [(ngModel)]="formModel.email"
          ></ion-input>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Contraseña</ion-label>

          <ion-input
            [type]="showPassword ? 'text' : 'password'"
            name="password"
            required
            minlength="6"
            autocomplete="current-password"
            [(ngModel)]="formModel.password"
          ></ion-input>

          <ion-button
            fill="clear"
            slot="end"
            size="small"
            type="button"
            (click)="togglePasswordVisibility()"
          >
            <ion-icon
              [name]="showPassword ? 'eye-off-outline' : 'eye-outline'"
              slot="start"
            ></ion-icon>
            {{ showPassword ? 'Ocultar' : 'Mostrar' }}
          </ion-button>
        </ion-item>

        @if (errorMessage) {
        <ion-text color="danger" class="auth-error">
          {{ errorMessage }}
        </ion-text>
        }

        <ion-button
          expand="block"
          type="submit"
          [disabled]="loginForm.invalid || loading"
          class="auth-primary"
        >
          @if (loading) {
          <ion-spinner name="crescent" slot="start"></ion-spinner>
          }
          Entrar
        </ion-button>

        <ion-button
          expand="block"
          fill="clear"
          type="button"
          (click)="goToRegister()"
        >
          Crear cuenta
        </ion-button>

        <div class="login-skip">
          <ion-button
            fill="clear"
            size="small"
            type="button"
            (click)="skipLogin()"
          >
            Saltar
          </ion-button>
        </div>
      </ion-list>
    </form>
  </section>
</ion-content>